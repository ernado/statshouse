<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/configure-metric" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Configure your metric | StatsHouse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/statshouse/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/statshouse/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/statshouse/guides/configure-metric"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configure your metric | StatsHouse"><meta data-rh="true" name="description" content="Get to know how to set up metric types, tags, resolution, and more."><meta data-rh="true" property="og:description" content="Get to know how to set up metric types, tags, resolution, and more."><link data-rh="true" rel="icon" href="/statshouse/img/statshouse.ico"><link data-rh="true" rel="canonical" href="https://github.com/statshouse/guides/configure-metric"><link data-rh="true" rel="alternate" href="https://github.com/statshouse/guides/configure-metric" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/statshouse/guides/configure-metric" hreflang="x-default"><link rel="stylesheet" href="/statshouse/assets/css/styles.47ec3da7.css">
<script src="/statshouse/assets/js/runtime~main.74c3ee79.js" defer="defer"></script>
<script src="/statshouse/assets/js/main.4dc471e9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/statshouse/"><div class="navbar__logo"><img src="/statshouse/img/statshouse.jpeg" alt="StatsHouse Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/statshouse/img/statshouse.jpeg" alt="StatsHouse Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">StatsHouse</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/statshouse/introduction">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/VKCOM/statshouse" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/statshouse/introduction">What is StatsHouse?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/statshouse/quick-demo">Quick demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/statshouse/basic-flow">Basic flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/statshouse/category/guides">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/access-cluster">Access a cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/create-metric">Create a metric</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/statshouse/guides/configure-metric">Configure your metric</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/refer-to-existing-metrics">Refer to existing metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/send-data">Send data from your code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/view-graph">View a metric on a graph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/dashboards">Monitor with dashboards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statshouse/guides/query-wth-promql">Query with PromQL</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/statshouse/category/conceptual-overview">Conceptual overview</a><button aria-label="Expand sidebar category &#x27;Conceptual overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/statshouse/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/statshouse/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/statshouse/category/guides"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configure your metric</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Configure your metric</h1>
<p>Before you start configuring metrics, you may have a question:</p>
<blockquote>
<p>&quot;Can I skip configuration for my metric?&quot;</p>
</blockquote>
<p>No. As soon as your metric has a name, you have to specify a <a href="#metric-type">metric type</a> in your sending requests.
Then, you can configure more parameters for advanced usage, or start sending data right away.</p>
<p>For the full list of configuration options, see the upper-right navigation menu on this page.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Do not commit configuration changes or send data to someone else&#x27;s metric as you can spoil the metric or the related data.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metric-type">Metric type<a href="#metric-type" class="hash-link" aria-label="Direct link to Metric type" title="Direct link to Metric type">​</a></h2>
<blockquote>
<p>&quot;What is a metric type? Why do I have to specify it?&quot;</p>
</blockquote>
<p>A metric is a <a href="https://dictionary.cambridge.org/dictionary/english/metric" target="_blank" rel="noopener noreferrer">system for measuring something</a>—it
is <em>how you measure</em> the things you are interested in.</p>
<p>You can measure same things in different ways. To evaluate service availability, you can count the
number of handled requests, which is just a number of events; or you can measure processing time for these requests,
which is the value accompanying each event (each request).</p>
<p>StatsHouse is a powerful tool, but it cannot decide for you, so you should clearly understand what you want to
measure, and how you will measure it.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>A metric type affects the range of
<a href="/statshouse/guides/view-graph#desriptive-statistics-available-for-a-metric">descriptive statistics</a> available for your metric to view
and analyze. For example, you cannot calculate the sum for unique counters (you can, but this sum is meaningless);
and percentiles are available for values only.</p><p>See more about <a href="#enable-percentiles">enabling percentiles</a>
and <a href="#aggregation">showing the proper descriptive statistics</a> in the UI.</p></div></div>
<blockquote>
<p>&quot;Which metric types are available in StatsHouse?&quot;</p>
</blockquote>
<p>With StatsHouse, you can use three basic metric types.</p>
<img src="/statshouse/assets/images/metric-types-cf304c98d8d3147e9ed9f132da1d644c.png" width="800">
<p>See the table below for definitions and examples:</p>
<table><thead><tr><th>Metric type</th><th>What does it measure?</th><th>Examples</th></tr></thead><tbody><tr><td>Counter</td><td>It counts the number of times an event has occurred.</td><td>The number of API method calls<br>The number of requests to a server<br>The number of errors received while sending messages</td></tr><tr><td>Value metric</td><td>It measures magnitude of a parameter.<br>A measurement event itself is counted as well.</td><td>How long does it take <br>for a service to generate a newsfeed?<br>What is CPU usage for this host?<br>What is the response size (in bytes)?</td></tr><tr><td>Unique counter</td><td>It counts the number of unique events.<br>The total number of events is counted as well.</td><td>The number of unique users who sent packages to a service</td></tr></tbody></table>
<p>Value metrics and unique counters have an ordinary counter inside so that you should not implement your own counters
for these metric types. Imagine you measuring a value metric (e.g. the
response size in bytes) once in a second:</p>
<ul>
<li>You get the &quot;value level&quot; that is your parameter magnitude:
1024 bytes, then 2048 bytes, etc. Please note that this &quot;level&quot; is [aggregation], not an exact value for a
particular moment in time.</li>
<li>You also get the &quot;counter&quot; for your value metric that shows the number of times you performed
your measurements: +1 for the first second, +1 for the next one, etc.</li>
</ul>
<p>The same applies to unique counters: they
provide you with both the number of unique events and the total number of events.
See more on
<a href="#changing-or-combining-metric-types">changing or combining metric types</a>
and <a href="#user-guided-sampling">user-guided sampling</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Metric types should not be confused with <a href="https://en.wikipedia.org/wiki/Data_type" target="_blank" rel="noopener noreferrer">data types</a> in programming
languages. You should not specify the type of your data: whether it is <code>int</code>, <code>float</code>, or <code>double</code>, etc.</p></div></div>
<blockquote>
<p>&quot;OK. How can I configure my metric type?&quot;</p>
</blockquote>
<p>You should specify a <a href="#metric-type">metric type</a> in your sending requests.</p>
<p>For a toy example, you may send your metric data with one of these <code>bash</code> scripts:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;{&quot;metrics&quot;:[{&quot;name&quot;:&quot;my_metric&quot;,&quot;tags&quot;:{},&quot;counter&quot;:1000}]}&#x27; | nc -q 1 -u 127.0.0.1 13337</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;{&quot;metrics&quot;:[{&quot;name&quot;:&quot;my_metric&quot;,&quot;tags&quot;:{},&quot;value&quot;:1000}]}&#x27; | nc -q 1 -u 127.0.0.1 13337</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>counter</code> or <code>value</code> are the metric types.</p>
<p>You can also use one of the client libraries. For example, with the
<a href="https://github.com/VKCOM/statshouse-py/tree/master" target="_blank" rel="noopener noreferrer">StatsHouse client library for Python</a>, you have
to choose one of these methods according to your metric type:</p>
<div class="language-Python language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">statshouse.count(&quot;my_metric&quot;, {}, 0.42)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-Python language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">statshouse.value(&quot;my_metric&quot;, {}, 0.42)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-Python language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">statshouse.unique(&quot;my_metric&quot;, {}, 0.42)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Having done this, you may send your data, or continue configuring metric parameters.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tags">Tags<a href="#tags" class="hash-link" aria-label="Direct link to Tags" title="Direct link to Tags">​</a></h2>
<p>You can <a href="/statshouse/guides/send-data">start sending data</a> to your metric with no additional configuration.
StatsHouse does everything for you, but it may lead to increased sampling. In most cases, you do not need
to worry about sampling, but if you are not sure, check the [conceptual overview].</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Sampling prevents StatsHouse from database overload. If you send too much, StatsHouse <em>samples</em>
data: it removes random data rows and multiplies the remaining ones so that the resulting aggregation and
digests stay the same. Find more about [sampling], [aggregation], and [digests].</p></div></div>
<p><a href="https://prometheus.io/docs/practices/naming/" target="_blank" rel="noopener noreferrer">https://prometheus.io/docs/practices/naming/</a></p>
<p>Use labels to differentiate the characteristics of the thing that is being measured:</p>
<p>api_http_requests_total - differentiate request types: operation=&quot;create|update|delete&quot;
api_request_duration_seconds - differentiate request stages: stage=&quot;extract|transform|load&quot;
Do not put the label names in the metric name, as this introduces redundancy and will cause confusion if the respective labels are aggregated away.</p>
<p>Remember that every unique combination of key-value label pairs represents a new time series, which can dramatically
increase the amount of data stored. Do not use labels to store dimensions with high cardinality (many different
label values), such as user IDs, email addresses, or other unbounded sets of values.</p>
<p><a href="https://www.robustperception.io/cardinality-is-key/" target="_blank" rel="noopener noreferrer">https://www.robustperception.io/cardinality-is-key/</a></p>
<blockquote>
<p>&quot;How many tags are allowed?&quot;</p>
</blockquote>
<blockquote>
<p>&quot;How many tag values are allowed?&quot;</p>
</blockquote>
<blockquote>
<p>&quot;What are tag ID, name, and description?&quot;</p>
</blockquote>
<blockquote>
<p>&quot;What are <em>Raw</em> tags and value comments&quot;</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="description">Description<a href="#description" class="hash-link" aria-label="Direct link to Description" title="Direct link to Description">​</a></h2>
<p>Description is for UI only. New lines are respected, no other formatting supported yet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">​</a></h2>
<p>CounterValueUniqueMixed</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="percentiles">Percentiles<a href="#percentiles" class="hash-link" aria-label="Direct link to Percentiles" title="Direct link to Percentiles">​</a></h2>
<p>Aggregation defines which functions (count, avg, sum, etc.) are available in UI. Mixed allows all functions. Enabling percentiles greatly increase data volume collected.
Resolution
1 second (native, default)2 seconds3 seconds4 seconds5 seconds (native)6 seconds10 seconds12 seconds15 seconds (native)20 seconds30 seconds60 seconds (native)
If your metric is heavily sampled, you can trade time resolution for reduced sampling. Selecting non-native resolution might render with surprises in UI.
Unit
no unitsecondmillisecondmicrosecondnanosecondbyte
The unit in which the metric is written
Weight</p>
<p>Important metrics can have their data budget proportionally increased. Will reduce other metrics budgets so can be enabled only by administrator.
Tags</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="units">Units<a href="#units" class="hash-link" aria-label="Direct link to Units" title="Direct link to Units">​</a></h2>
<p>no unitsecondmillisecondmicrosecondnanosecondbyte
The unit in which the metric is written</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="weight">Weight<a href="#weight" class="hash-link" aria-label="Direct link to Weight" title="Direct link to Weight">​</a></h2>
<p>Important metrics can have their data budget proportionally increased. Will reduce other metrics budgets so can be enabled only by administrator.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="metric-groups">Metric groups<a href="#metric-groups" class="hash-link" aria-label="Direct link to Metric groups" title="Direct link to Metric groups">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-metric-options">Advanced metric options<a href="#advanced-metric-options" class="hash-link" aria-label="Direct link to Advanced metric options" title="Direct link to Advanced metric options">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changing-or-combining-metric-types">Changing or combining metric types<a href="#changing-or-combining-metric-types" class="hash-link" aria-label="Direct link to Changing or combining metric types" title="Direct link to Changing or combining metric types">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-guided-sampling">User-guided sampling<a href="#user-guided-sampling" class="hash-link" aria-label="Direct link to User-guided sampling" title="Direct link to User-guided sampling">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-a-metric">Disabling a metric<a href="#disabling-a-metric" class="hash-link" aria-label="Direct link to Disabling a metric" title="Direct link to Disabling a metric">​</a></h2>
<p>Disabling metric stops data recording for this metric and removes it from all lists.
This is most close thing to deleting metric (which statshouse does not support).
You will need a direct link to enable metric again.</p>
<p>If you disable a metric, you stop recording data for it and remove it from the metric
list. You can enable the metric only via the direct link.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/statshouse/guides/create-metric"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create a metric</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/statshouse/guides/refer-to-existing-metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Refer to existing metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#metric-type" class="table-of-contents__link toc-highlight">Metric type</a></li><li><a href="#tags" class="table-of-contents__link toc-highlight">Tags</a></li><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#aggregation" class="table-of-contents__link toc-highlight">Aggregation</a></li><li><a href="#percentiles" class="table-of-contents__link toc-highlight">Percentiles</a></li><li><a href="#resolution" class="table-of-contents__link toc-highlight">Resolution</a></li><li><a href="#units" class="table-of-contents__link toc-highlight">Units</a></li><li><a href="#weight" class="table-of-contents__link toc-highlight">Weight</a></li><li><a href="#metric-groups" class="table-of-contents__link toc-highlight">Metric groups</a></li><li><a href="#advanced-metric-options" class="table-of-contents__link toc-highlight">Advanced metric options</a><ul><li><a href="#changing-or-combining-metric-types" class="table-of-contents__link toc-highlight">Changing or combining metric types</a></li><li><a href="#user-guided-sampling" class="table-of-contents__link toc-highlight">User-guided sampling</a></li></ul></li><li><a href="#disabling-a-metric" class="table-of-contents__link toc-highlight">Disabling a metric</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/statshouse/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/VKCOM/statshouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 StatsHouse.</div></div></div></footer></div>
</body>
</html>